# ImageSaid 使用指南

## 准备工作

### 1. 安装 Ollama

访问 [https://ollama.ai](https://ollama.ai) 下载并安装 Ollama。

### 2. 下载视觉模型

在终端中运行以下命令下载推荐的视觉模型：

```bash
# LLaVA 模型（推荐，约 4.5GB）
ollama pull llava

# 或者更小的模型
ollama pull moondream
```

### 3. 启动 Ollama 服务

```bash
ollama serve
```

服务将在 `http://localhost:11434` 启动。

## 使用步骤

### 第一步：配置连接

1. 启动 ImageSaid 应用
2. 在"步骤 1: 设置模型"区域：
   - 确认 API 地址为 `http://localhost:11434`
   - 选择模型（推荐 `llava`）
   - 点击"测试连接"按钮
   - 看到"连接成功"提示即可

### 第二步：设置提示词

在"步骤 2: 编辑重命名提示词"区域编辑提示词。

**示例提示词：**

```
请用简洁的中文描述图片内容，格式为"场景_主体_动作"
```

**其他提示词示例：**

- 英文描述：`Describe this image in English with format "location_subject_action"`
- 关键词格式：`Generate 3 keywords separated by underscores that describe this image`
- 详细描述：`请详细描述这张图片的内容，包括场景、人物、物体和动作`

### 第三步：添加图片

将图片文件拖拽到应用窗口的图片列表区域。

**支持的格式：**
- JPG / JPEG
- PNG
- WEBP
- AVIF

**支持的操作：**
- 拖拽单个文件
- 拖拽多个文件
- 拖拽整个文件夹（会自动筛选图片文件）

### 第四步：生成新名称

1. 点击"开始生成新名称"按钮
2. 应用会逐一处理每张图片
3. 可以在表格中看到实时进度：
   - 🔄 处理中
   - ✅ 完成
   - ❌ 错误

### 第五步：检查和编辑

1. 查看 AI 生成的文件名
2. 可以手动编辑任何不满意的文件名
3. 删除不需要重命名的图片

### 第六步：应用重命名

1. 点击"应用重命名"按钮
2. 在确认对话框中点击"确认重命名"
3. 等待重命名完成

⚠️ **注意：重命名操作不可撤销，请确保已备份重要文件！**

## 常见问题

### Q: 连接测试失败怎么办？

**A:** 请检查：
1. Ollama 是否已安装并运行 (`ollama serve`)
2. 防火墙是否阻止了端口 11434
3. API 地址是否正确

### Q: 生成的文件名包含特殊字符怎么办？

**A:** 应用会自动清理文件名中的非法字符，将它们替换为下划线。

### Q: 如何获得更好的命名效果？

**A:** 
1. 使用更具体的提示词
2. 在提示词中指定格式要求
3. 尝试不同的模型（如 `bakllava`、`moondream`）

### Q: 处理大量图片时应用卡顿怎么办？

**A:** 
1. 分批处理图片（建议每次不超过 50 张）
2. 确保电脑有足够的内存
3. 关闭其他占用资源的程序

### Q: 可以处理哪些类型的图片？

**A:** 
- 照片（人物、风景、物体等）
- 截图
- 艺术作品
- 图表和文档（效果可能不如照片）

## 提示词技巧

### 基础格式控制

```
请用"类别-描述"的格式为图片命名
```

### 多语言支持

```
Describe the image in English using format "adjective_noun_verb"
```

### 特定场景

```
这是一张风景照片，请用"地点_天气_时间"格式命名
```

### 详细描述

```
请详细描述图片内容，包括颜色、情绪、风格，用下划线分隔关键词
```

## 性能优化建议

1. **批量大小**：建议每次处理 20-50 张图片
2. **模型选择**：
   - `llava`: 质量最好，速度中等
   - `moondream`: 速度快，质量良好
   - `bakllava`: 平衡选择
3. **硬件要求**：建议 8GB+ 内存，有独立显卡更佳
